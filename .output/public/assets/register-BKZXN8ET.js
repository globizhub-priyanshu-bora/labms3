import{D as re,r as d,x as le,k as ne,j as e,X as ie,M as de,N as ce,B as y,b as J,w as oe,O as me,P as xe}from"./main-Cf6GnPUP.js";import{u as q}from"./index.esm-BtFOFtum.js";import{L as a}from"./label-DSWeXf5y.js";import{L as ue}from"./Layout-CtOqpOxJ.js";import{S as K}from"./search-6heZIVVW.js";import{U as he}from"./user-plus-8OdbmIK9.js";import"./user-DAVMjCJ9.js";function pe({isOpen:j,onClose:c,onBillCreated:x}){const{showToast:l}=re(),[E,r]=d.useState([]),[N,o]=d.useState([]),[g,v]=d.useState([]),[P,k]=d.useState(!1),{register:f,handleSubmit:T,reset:L,formState:{errors:n}}=q();d.useEffect(()=>{j&&C()},[j]);const C=async()=>{try{const[s,i]=await Promise.all([le({data:{limit:100,offset:0}}),ne({data:{limit:100,offset:0}})]);s.success&&r(s.data||[]),i.success&&o(i.data||[])}catch(s){console.error("Error loading data:",s),l("Failed to load patient and test data","error")}},w=async s=>{if(g.length===0){l("Please select at least one test","warning");return}k(!0);try{(await de({data:{patientId:s.patientId,testIds:g,discount:s.discount?Number(s.discount):0,tax:s.tax?Number(s.tax):0}})).success?(l("Bill created successfully","success"),L(),v([]),c(),x?.()):l("Failed to create bill","error")}catch(i){console.error("Error creating bill:",i),l(i instanceof Error?i.message:"Failed to create bill","error")}finally{k(!1)}};if(!j)return null;const D=()=>g.reduce((s,i)=>{const p=N.find(A=>A.id===i);return s+(p?Number(p.price):0)},0);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-2xl w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Bill"}),e.jsx("button",{onClick:c,className:"text-gray-600 hover:text-gray-900",children:e.jsx(ie,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:T(w),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"patient",children:"Patient *"}),e.jsxs("select",{id:"patient",...f("patientId",{required:"Patient is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select a patient"}),E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),n.patientId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.patientId.message})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Select Tests *"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-gray-50",children:N.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No tests available"}):N.map(s=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-100 cursor-pointer rounded",children:[e.jsx("input",{type:"checkbox",checked:g.includes(s.id),onChange:()=>{v(i=>i.includes(s.id)?i.filter(p=>p!==s.id):[...i,s.id])},className:"w-4 h-4 rounded border-gray-300"}),e.jsxs("span",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("span",{className:"text-gray-600 ml-2",children:["₹",Number(s.price).toFixed(2)]})]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"discount",children:"Discount %"}),e.jsx("input",{id:"discount",...f("discount"),type:"number",min:"0",max:"100",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"tax",children:"Tax %"}),e.jsx("input",{id:"tax",...f("tax"),type:"number",min:"0",max:"100",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"0"})]})]}),g.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm font-semibold text-blue-900",children:["Total: ₹",D().toFixed(2)]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:P,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded disabled:opacity-50",children:P?"Creating...":"Create Bill"})]})]})]})})}function Se(){const j=ce.useLoaderData(),[c,x]=d.useState("search"),[l,E]=d.useState(""),[r,N]=d.useState(null),[o,g]=d.useState([]),[v,P]=d.useState(""),[k,f]=d.useState(!1),[T,L]=d.useState(null),[n,C]=d.useState("unpaid"),[w,D]=d.useState(!1),[s,i]=d.useState(null),p=j?.tests?.data||[],A=j?.doctors?.data||[],{register:b,handleSubmit:V,formState:{errors:U,isSubmitting:W}}=q(),{register:F,handleSubmit:Y,watch:G,formState:{isSubmitting:Q}}=q(),z=G("discount")||"0",O=G("tax")||"0",m=(()=>{const t=o.reduce((M,I)=>{const B=p.find($=>$.id===I);return M+(B?parseFloat(B.price):0)},0),u=t*parseFloat(z)/100,h=(t-u)*parseFloat(O)/100,R=t-u+h;return{total:t.toFixed(2),discountAmount:u.toFixed(2),taxAmount:h.toFixed(2),final:R.toFixed(2)}})(),Z=async()=>{if(!l||l.length<10){alert("Please enter a valid phone number");return}try{const t=await me({data:{phoneNumber:parseInt(l)}});t.exists&&t.data?(N({...t.data,phoneNumber:parseInt(l)}),x("tests")):x("register")}catch(t){console.error("Error searching patient:",t),alert("Failed to search patient")}},_=async t=>{N({...t,phoneNumber:parseInt(l)}),x("tests")},ee=async t=>{if(o.length===0){alert("Please select at least one test");return}i(t),x("payment")},te=async()=>{if(n!=="paid"){alert("Please mark the payment as PAID to generate the bill and complete registration");return}if(!s){alert("Test data is missing. Please go back and select tests again!");return}D(!0);try{const t=s.doctorId&&!isNaN(Number(s.doctorId))?Number(s.doctorId):void 0,u=!r.id,h=await xe({data:{isNewPatient:u,patientId:r.id?r.id:void 0,patient:{name:r.name,age:r.age,gender:r.gender,phoneNumber:r.phoneNumber||parseInt(l),addressLine1:r.addressLine1,city:r.city,state:r.state,country:r.country,pincode:r.pincode},tests:{testIds:o,doctorId:t,reportDeliveryDate:s.reportDeliveryDate,discount:z||"0",tax:O||"0",totalAmount:m.total,finalAmount:m.final}}});if(h.success){const R=o.map(I=>{const B=p.find(S=>S.id===I),$=h.data.tests.find(S=>S.testId===I),ae=t?A.find(S=>S.id===t):null;return{patientTest:$,test:B,doctor:ae}}),M={bill:h.data.bill,patient:h.data.patient,tests:R};L(M),f(!0)}}catch(t){console.error("Error registering patient:",t),alert(t instanceof Error?t.message:"Failed to register patient")}finally{D(!1)}},se=()=>{f(!1),window.location.href="/lab-management"},X=t=>{g(u=>u.includes(t)?u.filter(h=>h!==t):[...u,t])},H=p.filter(t=>t.name.toLowerCase().includes(v.toLowerCase()));return e.jsxs(ue,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"bg-white border border-gray-300 mb-4 p-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Patient Registration"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[c==="search"&&"Search patient by phone number",c==="register"&&"Enter patient information",c==="tests"&&"Select tests and complete registration",c==="payment"&&"Confirm payment and generate bill"]})]}),c==="search"&&e.jsx("div",{className:"bg-white border border-gray-300 p-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(K,{className:"w-16 h-16 text-gray-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 text-center mb-6",children:"Search Patient"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"number",value:l,onChange:t=>E(t.target.value),placeholder:"Enter phone number",className:"w-full px-4 py-3 border border-gray-300 text-sm rounded"})]}),e.jsxs(y,{onClick:Z,className:"w-full px-4 py-3",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Search Patient"]})]})]})}),c==="register"&&e.jsxs("div",{className:"bg-white border border-gray-300 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(he,{className:"w-6 h-6 text-gray-700"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),e.jsxs("form",{onSubmit:V(_),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",...b("name",{required:"Name is required",minLength:{value:2,message:"Minimum 2 characters"}}),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter full name"}),U.name&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:U.name.message})]}),e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Age"}),e.jsx("input",{type:"number",...b("age",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter age"})]}),e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Gender"}),e.jsxs("select",{...b("gender"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"text",value:l,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 text-sm bg-gray-100 rounded"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Address"}),e.jsx("input",{type:"text",...b("addressLine1"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter address"})]}),e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"City"}),e.jsx("input",{type:"text",...b("city"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"State"}),e.jsx("input",{type:"text",...b("state"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter state"})]}),e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Country"}),e.jsx("input",{type:"text",...b("country"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter country"})]}),e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Pincode"}),e.jsx("input",{type:"number",...b("pincode",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter pincode"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(y,{type:"button",onClick:()=>x("search"),variant:"destructive",className:"flex-1 px-4 py-2",children:"Back"}),e.jsx(y,{type:"submit",disabled:W,className:"flex-1 px-4 py-2",children:W?"Processing...":"Next"})]})]})]}),c==="tests"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-300 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Select Tests (",o.length," selected)"]}),e.jsx("input",{type:"text",placeholder:"Search tests...",value:v,onChange:t=>P(t.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm mb-4 rounded"}),e.jsx("div",{className:"border border-gray-300 max-h-96 overflow-y-auto rounded",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{className:"border-b border-gray-300",children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-900 w-12",children:"Select"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-900",children:"Test Name"}),e.jsx("th",{className:"px-3 py-2 text-right font-semibold text-gray-900",children:"Price (₹)"})]})}),e.jsx("tbody",{children:H.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:3,className:"px-3 py-8 text-center",children:[e.jsx(J,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No tests found"})]})}):H.map(t=>e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 cursor-pointer",onClick:()=>X(t.id),children:[e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:o.includes(t.id),onChange:()=>X(t.id),className:"w-4 h-4"})}),e.jsx("td",{className:"px-3 py-2 text-gray-900",children:t.name}),e.jsxs("td",{className:"px-3 py-2 text-right text-gray-900",children:["₹",t.price]})]},t.id))})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("form",{onSubmit:Y(ee),children:e.jsxs("div",{className:"bg-white border border-gray-300 p-4 rounded",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bill Summary"}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Referring Doctor"}),e.jsxs("select",{...F("doctorId"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",children:[e.jsx("option",{value:"",children:"Select doctor"}),A.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Report Delivery Date"}),e.jsx("input",{type:"date",...F("reportDeliveryDate"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Discount (%)"}),e.jsx("input",{type:"number",step:"0.01",...F("discount"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(a,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Tax (%)"}),e.jsx("input",{type:"number",step:"0.01",...F("tax"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"text-gray-900",children:["₹",m.total]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"text-red-600",children:["-₹",m.discountAmount]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsxs("span",{className:"text-gray-900",children:["+₹",m.taxAmount]})]}),e.jsxs("div",{className:"flex justify-between text-base font-semibold border-t border-gray-300 pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total:"}),e.jsxs("span",{className:"text-gray-900",children:["₹",m.final]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsx(y,{type:"button",onClick:()=>x(r.id?"search":"register"),variant:"destructive",className:"flex-1 px-4 py-2 text-sm",children:"Back"}),e.jsx(y,{type:"submit",disabled:Q||o.length===0,className:"flex-1 px-4 py-2 text-sm",children:Q?"Processing...":"Proceed to Payment"})]})]})})})]}),c==="payment"&&e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white border border-gray-300 p-8 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Payment Confirmation"}),e.jsxs("div",{className:"bg-gray-50 border border-gray-300 p-6 rounded-lg mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Registration Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Patient Name:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:r?.name})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Phone Number:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:l})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Selected Tests:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:o.length})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-3 mt-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"text-gray-900",children:["₹",m.total]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"text-red-600",children:["-₹",m.discountAmount]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsxs("span",{className:"text-gray-900",children:["+₹",m.taxAmount]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-3 mt-3",children:[e.jsx("span",{className:"text-gray-900",children:"Total Amount:"}),e.jsxs("span",{className:"text-blue-600",children:["₹",m.final]})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(a,{className:"block text-base font-semibold text-gray-900 mb-3",children:"Payment Status *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>C("paid"),className:`px-6 py-4 border-2 rounded-lg text-center transition-all ${n==="paid"?"border-green-600 bg-green-50":"border-gray-300 bg-white hover:border-green-400"}`,children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 mb-2 flex items-center justify-center ${n==="paid"?"border-green-600 bg-green-600":"border-gray-300"}`,children:n==="paid"&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`font-semibold ${n==="paid"?"text-green-700":"text-gray-700"}`,children:"PAID"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Payment received"})]})}),e.jsx("button",{type:"button",onClick:()=>C("unpaid"),className:`px-6 py-4 border-2 rounded-lg text-center transition-all ${n==="unpaid"?"border-red-600 bg-red-50":"border-gray-300 bg-white hover:border-red-400"}`,children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 mb-2 flex items-center justify-center ${n==="unpaid"?"border-red-600 bg-red-600":"border-gray-300"}`,children:n==="unpaid"&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`font-semibold ${n==="unpaid"?"text-red-700":"text-gray-700"}`,children:"UNPAID"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Payment pending"})]})})]})]}),n==="unpaid"&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(J,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-800",children:"Payment Required"}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Please mark the payment as PAID to generate the bill and complete the patient registration."})]})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(y,{type:"button",onClick:()=>x("tests"),variant:"destructive",className:"flex-1 px-6 py-3",disabled:w,children:"Back to Tests"}),e.jsx(y,{type:"button",onClick:te,disabled:n!=="paid"||w,className:"flex-1 px-6 py-3 bg-green-600 hover:bg-green-700",children:w?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):"Generate Bill & Complete Registration"})]}),n!=="paid"&&e.jsx("p",{className:"text-xs text-center text-gray-500 mt-4",children:"* Bill can only be generated after payment is marked as PAID"})]})})]}),k&&T&&e.jsx(pe,{billData:T,onClose:se})]})}export{Se as component};
