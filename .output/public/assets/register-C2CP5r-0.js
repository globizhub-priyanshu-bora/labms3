import{r as d,j as e,X as le,t as p,T as ne,u as X,L as l,B as u,b as Y,x as ie,U as de,V as ce}from"./main-U2sX-pZG.js";import{L as oe}from"./Layout-gOgl803z.js";import{S as H}from"./search-C16oIlKW.js";import{U as xe}from"./user-plus-Ba1wm7Ku.js";function me({isOpen:P,onClose:i,billData:t}){const[n,S]=d.useState(!1);if(!P||!t)return null;const r=()=>{S(!0),setTimeout(()=>{window.print(),S(!1)},500)},k=()=>{p.success("PDF download feature coming soon")},b=t.tests.reduce((y,a)=>y+(a.test?parseFloat(a.test.price||0):0),0),g=parseFloat(t.bill?.discount||0),j=parseFloat(t.bill?.tax||0),N=b*g/100,f=(b-N)*j/100,T=b-N+f;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Invoice"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Invoice #: ",t.bill?.invoiceNumber]})]}),e.jsx("button",{onClick:i,className:"text-white hover:bg-blue-800 p-2 rounded-lg transition-colors",children:e.jsx(le,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"LAB INFORMATION"}),e.jsx("p",{className:"font-bold text-gray-900",children:"Your Laboratory"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Registration: LAB-12345"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Phone: +91 9876543210"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"PATIENT INFORMATION"}),e.jsx("p",{className:"font-bold text-gray-900",children:t.patient?.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",t.patient?.phoneNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Age: ",t.patient?.age||"N/A"," | Gender: ",t.patient?.gender||"N/A"]})]})]}),e.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden mb-8",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left font-semibold text-gray-900",children:"Test Name"}),e.jsx("th",{className:"px-6 py-3 text-right font-semibold text-gray-900",children:"Price"})]})}),e.jsx("tbody",{children:t.tests&&t.tests.length>0?t.tests.map((y,a)=>e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-3 text-gray-900",children:y.test?.name||"N/A"}),e.jsxs("td",{className:"px-6 py-3 text-right text-gray-900",children:["₹",y.test?.price||"0.00"]})]},a)):e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"px-6 py-4 text-center text-gray-500",children:"No tests selected"})})})]})}),e.jsx("div",{className:"flex justify-end mb-8",children:e.jsx("div",{className:"w-full max-w-xs border-2 border-gray-300 rounded-lg p-6 bg-gray-50",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-900",children:[e.jsx("span",{className:"font-semibold",children:"Subtotal:"}),e.jsxs("span",{children:["₹",b.toFixed(2)]})]}),g>0&&e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsxs("span",{className:"font-semibold",children:["Discount (",g,"%):"]}),e.jsxs("span",{children:["-₹",N.toFixed(2)]})]}),j>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{className:"font-semibold",children:["Tax (",j,"%):"]}),e.jsxs("span",{children:["+₹",f.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-3",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{children:["₹",T.toFixed(2)]})]})})]})})}),e.jsx("div",{className:`p-4 rounded-lg mb-6 ${t.bill?.isPaid?"bg-green-50 border-2 border-green-300":"bg-yellow-50 border-2 border-yellow-300"}`,children:e.jsxs("p",{className:`font-semibold ${t.bill?.isPaid?"text-green-700":"text-yellow-700"}`,children:["Payment Status: ",t.bill?.isPaid?"✓ PAID":"⏳ UNPAID"]})}),e.jsxs("div",{className:"text-center text-sm text-gray-500 border-t border-gray-300 pt-4 mb-6",children:[e.jsx("p",{children:"Thank you for using our laboratory services!"}),e.jsxs("p",{className:"text-xs mt-2",children:["Generated on: ",new Date().toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-3 justify-end print:hidden",children:[e.jsx("button",{onClick:i,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg transition-colors",children:"Close"}),e.jsx("button",{onClick:k,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors",children:"��� Download PDF"}),e.jsx("button",{onClick:r,disabled:n,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:n?"Processing...":"���️ Print"})]})]})]})})}function ye(){const P=ne.useLoaderData(),[i,t]=d.useState("search"),[n,S]=d.useState(""),[r,k]=d.useState(null),[o,b]=d.useState([]),[g,j]=d.useState(""),[N,f]=d.useState(!1),[T,y]=d.useState(null),[a,R]=d.useState("unpaid"),[I,M]=d.useState(!1),[v,J]=d.useState(null),D=P?.tests?.data||[],$=P?.doctors?.data||[],{register:h,handleSubmit:K,formState:{errors:O,isSubmitting:U}}=X(),{register:A,handleSubmit:Z,watch:G,formState:{isSubmitting:q}}=X(),W=G("discount")||"0",Q=G("tax")||"0",c=(()=>{const s=o.reduce((B,C)=>{const F=D.find(E=>E.id===C);return B+(F?parseFloat(F.price):0)},0),x=s*parseFloat(W)/100,m=(s-x)*parseFloat(Q)/100,L=s-x+m;return{total:s.toFixed(2),discountAmount:x.toFixed(2),taxAmount:m.toFixed(2),final:L.toFixed(2)}})(),_=async()=>{if(!n||n.length<10){p.error("Please enter a valid phone number");return}try{const s=await de({data:{phoneNumber:parseInt(n)}});s.exists&&s.data?(k({...s.data,phoneNumber:parseInt(n)}),t("tests")):t("register")}catch(s){console.error("Error searching patient:",s),p.error("Failed to search patient")}},ee=async s=>{k({...s,phoneNumber:parseInt(n)}),t("tests")},se=async s=>{if(o.length===0){p.error("Please select at least one test");return}J(s),t("payment")},te=async()=>{if(a!=="paid"){p.error("Please mark the payment as PAID to generate the bill and complete registration");return}if(!v){p.error("Test data is missing. Please go back and select tests again!");return}M(!0);try{const s=v.doctorId&&!isNaN(Number(v.doctorId))?Number(v.doctorId):void 0,x=!r.id,m=await ce({data:{isNewPatient:x,patientId:r.id?r.id:void 0,patient:{name:r.name,age:r.age,gender:r.gender,phoneNumber:r.phoneNumber||parseInt(n),addressLine1:r.addressLine1,city:r.city,state:r.state,country:r.country,pincode:r.pincode},tests:{testIds:o,doctorId:s,reportDeliveryDate:v.reportDeliveryDate,discount:W||"0",tax:Q||"0",totalAmount:c.total,finalAmount:c.final}}});if(m.success){const L=o.map(C=>{const F=D.find(w=>w.id===C),E=m.data.tests.find(w=>w.testId===C),re=s?$.find(w=>w.id===s):null;return{patientTest:E,test:F,doctor:re}}),B={bill:m.data.bill,patient:m.data.patient,tests:L};y(B),f(!0),p.success("Patient registered successfully!")}}catch(s){console.error("Error registering patient:",s),p.error(s instanceof Error?s.message:"Failed to register patient")}finally{M(!1)}},ae=()=>{f(!1),window.location.href="/lab-management"},z=s=>{b(x=>x.includes(s)?x.filter(m=>m!==s):[...x,s])},V=D.filter(s=>s.name.toLowerCase().includes(g.toLowerCase()));return e.jsxs(oe,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"bg-white border border-gray-300 mb-4 p-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Patient Registration"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[i==="search"&&"Search patient by phone number",i==="register"&&"Enter patient information",i==="tests"&&"Select tests and complete registration",i==="payment"&&"Confirm payment and generate bill"]})]}),i==="search"&&e.jsx("div",{className:"bg-white border border-gray-300 p-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(H,{className:"w-16 h-16 text-gray-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 text-center mb-6",children:"Search Patient"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"number",value:n,onChange:s=>S(s.target.value),placeholder:"Enter phone number",className:"w-full px-4 py-3 border border-gray-300 text-sm rounded"})]}),e.jsxs(u,{onClick:_,className:"w-full px-4 py-3",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Search Patient"]})]})]})}),i==="register"&&e.jsxs("div",{className:"bg-white border border-gray-300 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(xe,{className:"w-6 h-6 text-gray-700"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),e.jsxs("form",{onSubmit:K(ee),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",...h("name",{required:"Name is required",minLength:{value:2,message:"Minimum 2 characters"}}),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter full name"}),O.name&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:O.name.message})]}),e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Age"}),e.jsx("input",{type:"number",...h("age",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter age"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Gender"}),e.jsxs("select",{...h("gender"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"text",value:n,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 text-sm bg-gray-100 rounded"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Address"}),e.jsx("input",{type:"text",...h("addressLine1"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter address"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"City"}),e.jsx("input",{type:"text",...h("city"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"State"}),e.jsx("input",{type:"text",...h("state"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter state"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Country"}),e.jsx("input",{type:"text",...h("country"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter country"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Pincode"}),e.jsx("input",{type:"number",...h("pincode",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"Enter pincode"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(u,{type:"button",onClick:()=>t("search"),variant:"destructive",className:"flex-1 px-4 py-2",children:"Back"}),e.jsx(u,{type:"submit",disabled:U,className:"flex-1 px-4 py-2",children:U?"Processing...":"Next"})]})]})]}),i==="tests"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-300 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Select Tests (",o.length," selected)"]}),e.jsx("input",{type:"text",placeholder:"Search tests...",value:g,onChange:s=>j(s.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm mb-4 rounded"}),e.jsx("div",{className:"border border-gray-300 max-h-96 overflow-y-auto rounded",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{className:"border-b border-gray-300",children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-900 w-12",children:"Select"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-900",children:"Test Name"}),e.jsx("th",{className:"px-3 py-2 text-right font-semibold text-gray-900",children:"Price (₹)"})]})}),e.jsx("tbody",{children:V.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:3,className:"px-3 py-8 text-center",children:[e.jsx(Y,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No tests found"})]})}):V.map(s=>e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 cursor-pointer",onClick:()=>z(s.id),children:[e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:o.includes(s.id),onChange:()=>z(s.id),className:"w-4 h-4"})}),e.jsx("td",{className:"px-3 py-2 text-gray-900",children:s.name}),e.jsxs("td",{className:"px-3 py-2 text-right text-gray-900",children:["₹",s.price]})]},s.id))})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("form",{onSubmit:Z(se),children:e.jsxs("div",{className:"bg-white border border-gray-300 p-4 rounded",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bill Summary"}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Referring Doctor"}),e.jsxs("select",{...A("doctorId"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",children:[e.jsx("option",{value:"",children:"Select doctor"}),$.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Report Delivery Date"}),e.jsx("input",{type:"date",...A("reportDeliveryDate"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Discount (%)"}),e.jsx("input",{type:"number",step:"0.01",...A("discount"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"block text-sm font-medium text-gray-900 mb-1",children:"Tax (%)"}),e.jsx("input",{type:"number",step:"0.01",...A("tax"),className:"w-full px-3 py-2 border border-gray-300 text-sm rounded",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"text-gray-900",children:["₹",c.total]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"text-red-600",children:["-₹",c.discountAmount]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsxs("span",{className:"text-gray-900",children:["+₹",c.taxAmount]})]}),e.jsxs("div",{className:"flex justify-between text-base font-semibold border-t border-gray-300 pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total:"}),e.jsxs("span",{className:"text-gray-900",children:["₹",c.final]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsx(u,{type:"button",onClick:()=>t(r.id?"search":"register"),variant:"destructive",className:"flex-1 px-4 py-2 text-sm",children:"Back"}),e.jsx(u,{type:"submit",disabled:q||o.length===0,className:"flex-1 px-4 py-2 text-sm",children:q?"Processing...":"Proceed to Payment"})]})]})})})]}),i==="payment"&&e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white border border-gray-300 p-8 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Payment Confirmation"}),e.jsxs("div",{className:"bg-gray-50 border border-gray-300 p-6 rounded-lg mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Registration Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Patient Name:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:r?.name})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Phone Number:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:n})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Selected Tests:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:o.length})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-3 mt-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"text-gray-900",children:["₹",c.total]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"text-red-600",children:["-₹",c.discountAmount]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsxs("span",{className:"text-gray-900",children:["+₹",c.taxAmount]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-3 mt-3",children:[e.jsx("span",{className:"text-gray-900",children:"Total Amount:"}),e.jsxs("span",{className:"text-blue-600",children:["₹",c.final]})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(l,{className:"block text-base font-semibold text-gray-900 mb-3",children:"Payment Status *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>R("paid"),className:`px-6 py-4 border-2 rounded-lg text-center transition-all ${a==="paid"?"border-green-600 bg-green-50":"border-gray-300 bg-white hover:border-green-400"}`,children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 mb-2 flex items-center justify-center ${a==="paid"?"border-green-600 bg-green-600":"border-gray-300"}`,children:a==="paid"&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`font-semibold ${a==="paid"?"text-green-700":"text-gray-700"}`,children:"PAID"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Payment received"})]})}),e.jsx("button",{type:"button",onClick:()=>R("unpaid"),className:`px-6 py-4 border-2 rounded-lg text-center transition-all ${a==="unpaid"?"border-red-600 bg-red-50":"border-gray-300 bg-white hover:border-red-400"}`,children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 mb-2 flex items-center justify-center ${a==="unpaid"?"border-red-600 bg-red-600":"border-gray-300"}`,children:a==="unpaid"&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`font-semibold ${a==="unpaid"?"text-red-700":"text-gray-700"}`,children:"UNPAID"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Payment pending"})]})})]})]}),a==="unpaid"&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Y,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-800",children:"Payment Required"}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Please mark the payment as PAID to generate the bill and complete the patient registration."})]})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{type:"button",onClick:()=>t("tests"),variant:"destructive",className:"flex-1 px-6 py-3",disabled:I,children:"Back to Tests"}),e.jsx(u,{type:"button",onClick:te,disabled:a!=="paid"||I,className:"flex-1 px-6 py-3 bg-green-600 hover:bg-green-700",children:I?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):"Generate Bill & Complete Registration"})]}),a!=="paid"&&e.jsx("p",{className:"text-xs text-center text-gray-500 mt-4",children:"* Bill can only be generated after payment is marked as PAID"})]})})]}),N&&T&&e.jsx(me,{billData:T,onClose:ae})]})}export{ye as component};
